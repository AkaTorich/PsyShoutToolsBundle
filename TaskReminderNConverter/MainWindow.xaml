<Window x:Class="TaskReminderApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Task Reminder &amp; Converter"
        Height="750"
        Width="1100"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5"
        Closing="Window_Closing">

    <Window.Resources>
        <!-- Modern Color Palette -->
        <SolidColorBrush x:Key="PrimaryColor" Color="#6366F1"/>
        <SolidColorBrush x:Key="SecondaryColor" Color="#8B5CF6"/>
        <SolidColorBrush x:Key="SuccessColor" Color="#10B981"/>
        <SolidColorBrush x:Key="WarningColor" Color="#F97316"/>
        <SolidColorBrush x:Key="DangerColor" Color="#EF4444"/>
        <SolidColorBrush x:Key="InfoColor" Color="#06B6D4"/>
        <SolidColorBrush x:Key="DarkBg" Color="#1F2937"/>
        <SolidColorBrush x:Key="LightBg" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#111827"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#6B7280"/>

        <!-- Modern Button Style -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryColor}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value="0.9"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Opacity" Value="0.5"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Success Button -->
        <Style x:Key="SuccessButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="{StaticResource SuccessColor}"/>
        </Style>

        <!-- Warning Button -->
        <Style x:Key="WarningButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="{StaticResource WarningColor}"/>
        </Style>

        <!-- Danger Button -->
        <Style x:Key="DangerButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="{StaticResource DangerColor}"/>
        </Style>

        <!-- Info Button -->
        <Style x:Key="InfoButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="{StaticResource InfoColor}"/>
        </Style>

        <!-- Secondary Button -->
        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="{StaticResource SecondaryColor}"/>
        </Style>

        <!-- Modern TextBox Style -->
        <Style x:Key="ModernTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#D1D5DB"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ScrollViewer x:Name="PART_ContentHost"
                                        Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="{StaticResource PrimaryColor}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Modern DatePicker Style -->
        <Style x:Key="ModernDatePicker" TargetType="DatePicker">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#D1D5DB"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Height" Value="42"/>
        </Style>

        <!-- Card Style -->
        <Style x:Key="Card" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" Opacity="0.1"
                                    BlurRadius="10" ShadowDepth="2"/>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="{StaticResource DarkBg}" Padding="24,20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel>
                    <TextBlock Text="Task Reminder &amp; Converter"
                             FontSize="28"
                             FontWeight="Bold"
                             Foreground="White"/>
                    <TextBlock Text="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð°Ð¼Ð¸ Ð¸ ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ñ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÐ¸ ÐºÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ñ‹"
                             FontSize="14"
                             Foreground="#9CA3AF"
                             Margin="0,5,0,0"/>
                </StackPanel>

                <!-- Keyboard Hook Status -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ñ…ÑƒÐºÐ°:"
                             Foreground="#9CA3AF"
                             FontSize="14"
                             VerticalAlignment="Center"
                             Margin="0,0,10,0"/>
                    <Ellipse x:Name="StatusIndicator"
                           Width="12"
                           Height="12"
                           Fill="{StaticResource DangerColor}"
                           Margin="0,0,8,0"/>
                    <TextBlock x:Name="HookStatusText"
                             Text="ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½"
                             Foreground="{StaticResource DangerColor}"
                             FontSize="14"
                             FontWeight="SemiBold"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1" Margin="24">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="20"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Panel - Task Creation & Keyboard Hook -->
            <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <!-- Keyboard Hook Control Card -->
                    <Border Style="{StaticResource Card}" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="âŒ¨ï¸ ÐšÐ¾Ð½Ð²ÐµÑ€Ñ‚ÐµÑ€ Ñ€Ð°ÑÐºÐ»Ð°Ð´ÐºÐ¸"
                                     FontSize="20"
                                     FontWeight="Bold"
                                     Foreground="{StaticResource TextPrimary}"
                                     Margin="0,0,0,16"/>

                            <TextBlock Text="ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ F2 Ð´Ð»Ñ ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ð¸ Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ð½Ð¾Ð³Ð¾ Ñ‚ÐµÐºÑÑ‚Ð°"
                                     Foreground="{StaticResource TextSecondary}"
                                     FontSize="13"
                                     TextWrapping="Wrap"
                                     Margin="0,0,0,16"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="10"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Button x:Name="StartHookBtn"
                                      Content="â–¶ Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ"
                                      Style="{StaticResource SuccessButton}"
                                      Click="StartHook_Click"
                                      Grid.Column="0"/>

                                <Button x:Name="StopHookBtn"
                                      Content="â¸ ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ"
                                      Style="{StaticResource DangerButton}"
                                      Click="StopHook_Click"
                                      IsEnabled="False"
                                      Grid.Column="2"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Add Task Card -->
                    <Border Style="{StaticResource Card}">
                        <StackPanel>
                            <TextBlock Text="âž• ÐÐ¾Ð²Ð°Ñ Ð·Ð°Ð´Ð°Ñ‡Ð°"
                                     FontSize="20"
                                     FontWeight="Bold"
                                     Foreground="{StaticResource TextPrimary}"
                                     Margin="0,0,0,20"/>

                            <!-- Task Title -->
                            <TextBlock Text="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸"
                                     Foreground="{StaticResource TextSecondary}"
                                     FontSize="13"
                                     FontWeight="SemiBold"
                                     Margin="0,0,0,6"/>
                            <TextBox x:Name="TaskTitleBox"
                                   Style="{StaticResource ModernTextBox}"
                                   Margin="0,0,0,16"/>

                            <!-- Task Description -->
                            <TextBlock Text="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ"
                                     Foreground="{StaticResource TextSecondary}"
                                     FontSize="13"
                                     FontWeight="SemiBold"
                                     Margin="0,0,0,6"/>
                            <TextBox x:Name="TaskDescriptionBox"
                                   Style="{StaticResource ModernTextBox}"
                                   TextWrapping="Wrap"
                                   AcceptsReturn="True"
                                   Height="80"
                                   Margin="0,0,0,16"/>

                            <!-- Date Picker -->
                            <TextBlock Text="Ð”Ð°Ñ‚Ð° Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ñ"
                                     Foreground="{StaticResource TextSecondary}"
                                     FontSize="13"
                                     FontWeight="SemiBold"
                                     Margin="0,0,0,6"/>
                            <DatePicker x:Name="TaskDatePicker"
                                      Style="{StaticResource ModernDatePicker}"
                                      Margin="0,0,0,16"/>

                            <!-- Time Input -->
                            <TextBlock Text="Ð’Ñ€ÐµÐ¼Ñ Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ñ"
                                     Foreground="{StaticResource TextSecondary}"
                                     FontSize="13"
                                     FontWeight="SemiBold"
                                     Margin="0,0,0,6"/>
                            <Grid Margin="0,0,0,16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="10"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="10"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBox x:Name="TaskHourBox"
                                       Style="{StaticResource ModernTextBox}"
                                       Text="12"
                                       Grid.Column="0"
                                       TextAlignment="Center"/>

                                <TextBlock Text=":"
                                         FontSize="20"
                                         FontWeight="Bold"
                                         VerticalAlignment="Center"
                                         HorizontalAlignment="Center"
                                         Grid.Column="2"/>

                                <TextBox x:Name="TaskMinuteBox"
                                       Style="{StaticResource ModernTextBox}"
                                       Text="00"
                                       Grid.Column="4"
                                       TextAlignment="Center"/>
                            </Grid>

                            <!-- Status Message -->
                            <TextBlock x:Name="StatusText"
                                     FontSize="13"
                                     TextWrapping="Wrap"
                                     Margin="0,0,0,16"/>

                            <!-- Action Buttons -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="10"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Button Content="âœ“ Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ"
                                      Style="{StaticResource ModernButton}"
                                      Click="AddTask_Click"
                                      Grid.Column="0"/>

                                <Button Content="âœ• ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ"
                                      Style="{StaticResource WarningButton}"
                                      Click="ClearForm_Click"
                                      Grid.Column="2"/>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- Right Panel - Task List -->
            <Border Grid.Column="2" Style="{StaticResource Card}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Task List Header -->
                    <Grid Grid.Row="0" Margin="0,0,0,16">
                        <TextBlock Text="ðŸ“‹ Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð·Ð°Ð´Ð°Ñ‡"
                                 FontSize="20"
                                 FontWeight="Bold"
                                 Foreground="{StaticResource TextPrimary}"
                                 VerticalAlignment="Center"/>

                        <Button Content="ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ"
                              Style="{StaticResource InfoButton}"
                              Click="RefreshTasks_Click"
                              HorizontalAlignment="Right"
                              Padding="12,6"/>
                    </Grid>

                    <!-- Task List -->
                    <ListBox x:Name="TaskListBox"
                           Grid.Row="1"
                           Background="Transparent"
                           BorderThickness="0"
                           ScrollViewer.VerticalScrollBarVisibility="Auto"
                           SelectionChanged="TaskListBox_SelectionChanged">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Background="White"
                                      BorderBrush="#E5E7EB"
                                      BorderThickness="1"
                                      CornerRadius="8"
                                      Padding="16"
                                      Margin="0,0,0,12">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <!-- Title and Status -->
                                        <Grid Grid.Row="0">
                                            <TextBlock Text="{Binding Title}"
                                                     FontSize="16"
                                                     FontWeight="Bold"
                                                     Foreground="{StaticResource TextPrimary}"/>

                                            <Border Background="{StaticResource InfoColor}"
                                                  CornerRadius="4"
                                                  Padding="8,4"
                                                  HorizontalAlignment="Right">
                                                <TextBlock Text="{Binding Status}"
                                                         FontSize="11"
                                                         FontWeight="SemiBold"
                                                         Foreground="White"/>
                                            </Border>
                                        </Grid>

                                        <!-- Description -->
                                        <TextBlock Grid.Row="1"
                                                 Text="{Binding Description}"
                                                 Foreground="{StaticResource TextSecondary}"
                                                 FontSize="13"
                                                 TextWrapping="Wrap"
                                                 Margin="0,8,0,0"/>

                                        <!-- Separator -->
                                        <Border Grid.Row="2"
                                              Height="1"
                                              Background="#E5E7EB"
                                              Margin="0,12,0,12"/>

                                        <!-- Reminder Time -->
                                        <TextBlock Grid.Row="3"
                                                 FontSize="12"
                                                 Foreground="{StaticResource TextSecondary}">
                                            <Run Text="ðŸ•’ ÐÐ°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð½Ð¸Ðµ:"/>
                                            <Run Text="{Binding ReminderTime, StringFormat='dd.MM.yyyy HH:mm'}"
                                                 FontWeight="SemiBold"/>
                                        </TextBlock>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>

                    <!-- Task Actions -->
                    <Grid Grid.Row="2" Margin="0,16,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Button Content="âœ“ Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¾"
                              Style="{StaticResource SuccessButton}"
                              Click="CompleteTask_Click"
                              Grid.Column="0"/>

                        <Button Content="ðŸ—‘ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ"
                              Style="{StaticResource DangerButton}"
                              Click="DeleteTask_Click"
                              Grid.Column="2"/>
                    </Grid>
                </Grid>
            </Border>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="2"
              Background="{StaticResource DarkBg}"
              Padding="24,12">
            <Grid>
                <TextBlock x:Name="StatusBarText"
                         Text="Ð“Ð¾Ñ‚Ð¾Ð² Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ðµ"
                         Foreground="#9CA3AF"
                         FontSize="13"/>

                <TextBlock HorizontalAlignment="Right"
                         Foreground="#6B7280"
                         FontSize="12">
                    <Run Text="Â© 2025"/>
                    <Run Text="Task Reminder App"/>
                    <Run Text="| v1.0"/>
                </TextBlock>
            </Grid>
        </Border>
    </Grid>
</Window>
